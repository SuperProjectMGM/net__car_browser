<div class="container">
  <div class="form-container">
    <h1 class="form-header">Account Registration</h1>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>

    <form class="registration-form" #registerForm="ngForm" (ngSubmit)="onRegister(registerForm)">

      <!-- Basic Information -->
      <div class="form-section">
        <label class="form-section-title">Basic Information</label>
        <div class="form-row">
          <div class="form-group">
            <label>Email *</label>
            <input 
              type="email" 
              class="form-control" 
              placeholder="Enter your email" 
              [(ngModel)]="registerModel.email" 
              name="email" 
              required 
              #email="ngModel" 
            />
            <div *ngIf="email.invalid && email.touched" class="error-message">
              Valid email is required.
            </div>
          </div>
          <div class="form-group">
            <label>Password *</label>
            <input 
              type="password" 
              class="form-control" 
              placeholder="Enter your password" 
              [(ngModel)]="registerModel.password" 
              name="password" 
              required 
              minlength="8" 
              #password="ngModel" 
            />
            <div *ngIf="password.invalid && password.touched" class="error-message">
              Password is required and must be at least 8 characters long.
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>First Name</label>
            <input 
              type="text" 
              class="form-control" 
              placeholder="Enter your first name" 
              [(ngModel)]="registerModel.name" 
              name="name" 
              pattern="[A-Za-z\s]+" 
              #name="ngModel" 
            />
            <div *ngIf="name.invalid && name.touched" class="error-message">
              First Name must only contain letters.
            </div>
          </div>
          <div class="form-group">
            <label>Last Name</label>
            <input 
              type="text" 
              class="form-control" 
              placeholder="Enter your last name" 
              [(ngModel)]="registerModel.surname" 
              name="surname" 
              pattern="[A-Za-z\s]+" 
              #surname="ngModel" 
            />
            <div *ngIf="surname.invalid && surname.touched" class="error-message">
              Last Name must only contain letters.
            </div>
          </div>
        </div>
        <div class="form-group">
          <label>Username</label>
          <input 
            type="text" 
            class="form-control" 
            placeholder="Enter your username" 
            [(ngModel)]="registerModel.userName" 
            name="userName" 
            required 
            #userName="ngModel" 
          />
          <div *ngIf="userName.invalid && userName.touched" class="error-message">
            Username is required.
          </div>
        </div>
        <div class="form-group">
          <label>Phone Number</label>
          <input 
            type="tel" 
            class="form-control" 
            placeholder="Enter your phone number" 
            [(ngModel)]="registerModel.phoneNumber" 
            name="phoneNumber" 
            pattern="[0-9]{9}" 
            #phoneNumber="ngModel" 
          />
          <div *ngIf="phoneNumber.invalid && phoneNumber.touched" class="error-message">
            Phone Number must be exactly 9 digits.
          </div>
        </div>
      </div>

      <!-- Address Information -->
      <div class="form-section">
        <label class="form-section-title">Address Information</label>
        <div class="form-row">
          <div class="form-group">
            <label>Street and Number</label>
            <input 
              type="text" 
              class="form-control" 
              placeholder="e.g., Flower St. 12/5" 
              [(ngModel)]="registerModel.streetAndNumber" 
              name="streetAndNumber" 
              required 
              #streetAndNumber="ngModel" 
            />
            <div *ngIf="streetAndNumber.invalid && streetAndNumber.touched" class="error-message">
              Street and Number is required.
            </div>
          </div>
          <div class="form-group">
            <label>Postal Code</label>
            <input 
              type="text" 
              class="form-control" 
              placeholder="e.g., 00-000" 
              [(ngModel)]="registerModel.postalCode" 
              name="postalCode" 
              pattern="[0-9]{2}-[0-9]{3}" 
              #postalCode="ngModel" 
            />
            <div *ngIf="postalCode.invalid && postalCode.touched" class="error-message">
              Postal Code must follow the format XX-XXX.
            </div>
          </div>
        </div>
        <div class="form-group">
          <label>City</label>
          <input 
            type="text" 
            class="form-control" 
            placeholder="Enter your city" 
            [(ngModel)]="registerModel.city" 
            name="city" 
            required 
            #city="ngModel" 
          />
          <div *ngIf="city.invalid && city.touched" class="error-message">
            City is required.
          </div>
        </div>
      </div>

      <!-- Personal Information -->
      <div class="form-section">
        <label class="form-section-title">Personal Information</label>
        <div class="form-row">
          <div class="form-group">
            <label>Date of Birth</label>
            <input 
              type="date" 
              class="form-control" 
              [(ngModel)]="registerModel.birthDate" 
              name="birthDate" 
              required
              [max]="eighteenYearsAgo" 
              #birthDate="ngModel" 
            />
            <div *ngIf="birthDate.invalid && birthDate.touched" class="error-message">
              Date of Birth is required.
            </div>
          </div>
          <div class="form-group">
            <label>Driving License Number</label>
            <input 
              type="text" 
              class="form-control" 
              placeholder="Enter your driving license number" 
              [(ngModel)]="registerModel.drivingLicenseNumber" 
              name="drivingLicenseNumber" 
              required 
              maxlength="15" 
              pattern="[A-Za-z0-9]+" 
              #drivingLicenseNumber="ngModel" 
            />
            <div *ngIf="drivingLicenseNumber.invalid && drivingLicenseNumber.touched" class="error-message">
              Driving License Number is required and must only contain letters and numbers.
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Driving License Issue Date</label>
            <input 
              type="date" 
              class="form-control" 
              [(ngModel)]="registerModel.drivingLicenseIssueDate" 
              name="drivingLicenseIssueDate" 
              required 
              #drivingLicenseIssueDate="ngModel" 
            />
            <div *ngIf="drivingLicenseIssueDate.invalid && drivingLicenseIssueDate.touched" class="error-message">
              Issue Date is required.
            </div>
          </div>
          <div class="form-group">
            <label>Driving License Expiration Date</label>
            <input 
              type="date" 
              class="form-control" 
              [(ngModel)]="registerModel.drivingLicenseExpirationDate" 
              name="drivingLicenseExpirationDate" 
              required 
              [min]="registerModel.drivingLicenseIssueDate" 
              #drivingLicenseExpirationDate="ngModel" 
            />
            <div *ngIf="drivingLicenseExpirationDate.invalid && drivingLicenseExpirationDate.touched" class="error-message">
              Expiration Date must be after the Issue Date.
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>ID Card Number</label>
            <input 
              type="text" 
              class="form-control" 
              placeholder="Enter your ID card number" 
              [(ngModel)]="registerModel.personalNumber" 
              name="personalNumber" 
              required 
              maxlength="20" 
              pattern="[A-Za-z0-9]+" 
              #personalNumber="ngModel" 
            />
            <div *ngIf="personalNumber.invalid && personalNumber.touched" class="error-message">
              ID Card Number is required and must only contain letters and numbers.
            </div>
          </div>
          <div class="form-group">
            <label>Issued By</label>
            <input 
              type="text" 
              class="form-control" 
              placeholder="Enter issuing authority" 
              [(ngModel)]="registerModel.idCardIssuedBy" 
              name="idCardIssuedBy" 
              required 
              maxlength="100" 
              #idCardIssuedBy="ngModel" 
            />
            <div *ngIf="idCardIssuedBy.invalid && idCardIssuedBy.touched" class="error-message">
              Issuing Authority is required.
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>ID Card Issue Date</label>
            <input 
              type="date" 
              class="form-control" 
              [(ngModel)]="registerModel.idCardIssueDate" 
              name="idCardIssueDate" 
              required 
              #idCardIssueDate="ngModel" 
            />
            <div *ngIf="idCardIssueDate.invalid && idCardIssueDate.touched" class="error-message">
              ID Card Issue Date is required.
            </div>
          </div>
          <div class="form-group">
            <label>ID Card Expiration Date</label>
            <input 
              type="date" 
              class="form-control" 
              [(ngModel)]="registerModel.idCardExpirationDate" 
              name="idCardExpirationDate" 
              [min]="registerModel.idCardIssueDate" 
              required 
              #idCardExpirationDate="ngModel" 
            />
            <div *ngIf="idCardExpirationDate.invalid && idCardExpirationDate.touched" class="error-message">
              Expiration Date must be after the Issue Date.
            </div>
          </div>
        </div>
      </div>

      <!-- Buttons -->
      <div class="submit-section">
        <button 
          type="button" 
          class="btn btn-secondary" 
          (click)="onCancel()">
          Cancel
        </button>
        <button 
          type="submit" 
          class="btn btn-primary">
          Register
        </button>
      </div>
    </form>
  </div>
</div>
